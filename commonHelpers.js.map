{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nconst API_KEY = \"42056951-259306f3e2aef1f0902f3daf3\";\nconst searchForm = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loaderContainer = document.querySelector(\".loader-container\");\nconst btnShowMore = document.querySelector(\".show-btn\");\nlet currentPage = 1;\n\nlet currentQuery = \"\";\nfunction showLoader(loaderContainer) {\n\tloaderContainer.style.display = \"flex\";\n}\n\nfunction hideLoader(loaderContainer) {\n\tloaderContainer.style.display = \"none\";\n}\nfunction hideLoadMoreBtn() {\n\tbtnShowMore.style.display = \"none\";\n}\nfunction showLoadMoreBtn() {\n\tbtnShowMore.style.display = \"block\";\n}\nasync function showMoreImages() {\n\tcurrentPage++;\n\tconst response = await fetchImage(currentQuery);\n\tshowImagesCards(response.hits);\n\n\tsmoothScroll();\n\tif (currentPage * 15 >= response.totalHits) {\n\t\tbtnShowMore.style.display = \"none\";\n\t\tiziToast.info({\n\t\t\ttitle: \"Sorry\",\n\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t});\n\t}\n}\nfunction smoothScroll() {\n\tconst cardHeight = document\n\t\t.querySelector(\".image-card\")\n\t\t.getBoundingClientRect().height;\n\n\twindow.scrollBy({\n\t\ttop: cardHeight * 2,\n\t\tbehavior: \"smooth\",\n\t});\n}\n\nhideLoadMoreBtn();\ngallery.innerHTML = \"\";\n\nsearchForm.addEventListener(\"submit\", handleSearch);\nhideLoader(loaderContainer);\n\nasync function handleSearch(event) {\n\tevent.preventDefault();\n\tgallery.innerHTML = \"\";\n\tshowLoader(loaderContainer);\n\tconst form = event.currentTarget;\n\tconst query = form.elements.query.value;\n\tcurrentQuery = query;\n\tif (query === \"\") {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error\",\n\t\t\tmessage: \"Please enter a search term\",\n\t\t});\n\t\thideLoader(loaderContainer);\n\t\thideLoadMoreBtn();\n\t\tgallery.innerHTML = \"\";\n\t\treturn;\n\t}\n\tgallery.innerHTML = \"\";\n\n\ttry {\n\t\tawait fetchImage(query)\n\t\t\t.then(data => {\n\t\t\t\tif (data.hits.length === 0) {\n\t\t\t\t\tiziToast.error({\n\t\t\t\t\t\ttitle: \"Error\",\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\t\t\t});\n\t\t\t\t\thideLoadMoreBtn();\n\t\t\t\t} else showImagesCards(data.hits);\n\t\t\t\thideLoader(loaderContainer);\n\t\t\t\tshowLoadMoreBtn();\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tsearchForm.reset();\n\t\t\t});\n\t} catch {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error\",\n\t\t\tmessage: \"Failed to fetch images. Please try again later.\",\n\t\t});\n\t}\n}\nbtnShowMore.addEventListener(\"click\", showMoreImages);\n\nasync function fetchImage(value) {\n\tconst params = {\n\t\tparams: {\n\t\t\tkey: API_KEY,\n\t\t\tq: value,\n\t\t\timage_type: \"photo\",\n\t\t\torientation: \"horizontal\",\n\t\t\tsafesearch: true,\n\t\t\tper_page: 15,\n\t\t\tpage: currentPage,\n\t\t},\n\t};\n\n\treturn await axios(params).then(({ data }) => data);\n}\nfunction showImagesCards(images) {\n\tconst markup = images\n\t\t.map(\n\t\t\t({\n\t\t\t\twebformatURL,\n\t\t\t\ttags,\n\t\t\t\tlikes,\n\t\t\t\tviews,\n\t\t\t\tcomments,\n\t\t\t\tdownloads,\n\t\t\t\tlargeImageURL,\n\t\t\t}) => `\n    \n      <div class=\"image-card\">\n      <a href = \"${largeImageURL}\" ><img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n      <div class=\"image-stats\">\n        <div class=\"stat-item\">\n          <p class=\"stat-label\">Likes:</p>\n          <p class=\"stat-value\">${likes}</p>\n        </div>\n        <div class=\"stat-item\">\n          <p class=\"stat-label\">Views:</p>\n          <p class=\"stat-value\">${views}</p>\n        </div>\n        <div class=\"stat-item\">\n          <p class=\"stat-label\">Comments:</p>\n          <p class=\"stat-value\">${comments}</p>\n        </div>\n        <div class=\"stat-item\">\n          <p class=\"stat-label\">Downloads:</p>\n          <p class=\"stat-value\">${downloads}</p>\n        </div>\n      </div>\n    </div>\n    `,\n\t\t)\n\t\t.join(\"\");\n\tgallery.insertAdjacentHTML(\"beforeend\", markup);\n\tconst lightbox = new SimpleLightbox(\".gallery a\", {\n\t\tcaptionsData: \"alt\",\n\t\tcaptionDelay: 250,\n\t});\n\n\tlightbox.refresh();\n}\n"],"names":["axios","API_KEY","searchForm","gallery","loaderContainer","btnShowMore","currentPage","currentQuery","showLoader","hideLoader","hideLoadMoreBtn","showLoadMoreBtn","showMoreImages","response","fetchImage","showImagesCards","smoothScroll","iziToast","cardHeight","handleSearch","event","query","data","value","images","markup","webformatURL","tags","likes","views","comments","downloads","largeImageURL","SimpleLightbox"],"mappings":"+vBAMAA,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAU,qCACVC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAkB,SAAS,cAAc,mBAAmB,EAC5DC,EAAc,SAAS,cAAc,WAAW,EACtD,IAAIC,EAAc,EAEdC,EAAe,GACnB,SAASC,EAAWJ,EAAiB,CACpCA,EAAgB,MAAM,QAAU,MACjC,CAEA,SAASK,EAAWL,EAAiB,CACpCA,EAAgB,MAAM,QAAU,MACjC,CACA,SAASM,GAAkB,CAC1BL,EAAY,MAAM,QAAU,MAC7B,CACA,SAASM,GAAkB,CAC1BN,EAAY,MAAM,QAAU,OAC7B,CACA,eAAeO,GAAiB,CAC/BN,IACA,MAAMO,EAAW,MAAMC,EAAWP,CAAY,EAC9CQ,EAAgBF,EAAS,IAAI,EAE7BG,IACIV,EAAc,IAAMO,EAAS,YAChCR,EAAY,MAAM,QAAU,OAC5BY,EAAS,KAAK,CACb,MAAO,QACP,QAAS,4DACZ,CAAG,EAEH,CACA,SAASD,GAAe,CACvB,MAAME,EAAa,SACjB,cAAc,aAAa,EAC3B,sBAAqB,EAAG,OAE1B,OAAO,SAAS,CACf,IAAKA,EAAa,EAClB,SAAU,QACZ,CAAE,CACF,CAEAR,IACAP,EAAQ,UAAY,GAEpBD,EAAW,iBAAiB,SAAUiB,CAAY,EAClDV,EAAWL,CAAe,EAE1B,eAAee,EAAaC,EAAO,CAClCA,EAAM,eAAc,EACpBjB,EAAQ,UAAY,GACpBK,EAAWJ,CAAe,EAE1B,MAAMiB,EADOD,EAAM,cACA,SAAS,MAAM,MAElC,GADAb,EAAec,EACXA,IAAU,GAAI,CACjBJ,EAAS,MAAM,CACd,MAAO,QACP,QAAS,4BACZ,CAAG,EACDR,EAAWL,CAAe,EAC1BM,IACAP,EAAQ,UAAY,GACpB,MACA,CACDA,EAAQ,UAAY,GAEpB,GAAI,CACH,MAAMW,EAAWO,CAAK,EACpB,KAAKC,GAAQ,CACTA,EAAK,KAAK,SAAW,GACxBL,EAAS,MAAM,CACd,MAAO,QACP,QACC,0EACP,CAAM,EACDP,KACMK,EAAgBO,EAAK,IAAI,EAChCb,EAAWL,CAAe,EAC1BO,GACJ,CAAI,EACA,QAAQ,IAAM,CACdT,EAAW,MAAK,CACpB,CAAI,CACJ,MAAG,CACDe,EAAS,MAAM,CACd,MAAO,QACP,QAAS,iDACZ,CAAG,CACD,CACF,CACAZ,EAAY,iBAAiB,QAASO,CAAc,EAEpD,eAAeE,EAAWS,EAAO,CAahC,OAAO,MAAMvB,EAZE,CACd,OAAQ,CACP,IAAKC,EACL,EAAGsB,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMjB,CACN,CACH,CAE0B,EAAE,KAAK,CAAC,CAAE,KAAAgB,CAAI,IAAOA,CAAI,CACnD,CACA,SAASP,EAAgBS,EAAQ,CAChC,MAAMC,EAASD,EACb,IACA,CAAC,CACA,aAAAE,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,cAAAC,CACJ,IAAS;AAAA;AAAA;AAAA,mBAGUA,6BAAyCN,WAAsBC;AAAA;AAAA;AAAA;AAAA,kCAIhDC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,KAK/B,EACA,KAAK,EAAE,EACT5B,EAAQ,mBAAmB,YAAasB,CAAM,EAC7B,IAAIQ,EAAe,aAAc,CACjD,aAAc,MACd,aAAc,GAChB,CAAE,EAEQ,QAAO,CACjB"}